{"version":3,"file":"AaDoraPage.esm.js","sources":["../../../src/components/AaDoraPage/AaDoraPage.tsx"],"sourcesContent":["/* eslint-disable no-console */\r\nimport { useState, useEffect, useCallback } from 'react';\r\nimport { InfoCard, Progress } from '@backstage/core-components';\r\nimport { Deployment, FilterRepo, Repo, Timeperiod } from '../../api/types';\r\nimport { Chip, Grid } from '@material-ui/core';\r\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\r\nimport { agileAnalyticsApiRef } from '../../api';\r\nimport useAsync from 'react-use/lib/useAsync';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { AaDoraChart } from '../AaDoraChart';\r\nimport moment from 'moment';\r\n\r\nexport const AaDoraPage = ({\r\n  timeperiod,\r\n  orgHash,\r\n  apiKey,\r\n}: {\r\n  timeperiod: Timeperiod;\r\n  orgHash: string;\r\n  apiKey: string;\r\n}) => {\r\n  const api = useApi(agileAnalyticsApiRef);\r\n\r\n  // =======FILTER  SETUP========\r\n  const reposState = useAsync(async (): Promise<any> => {\r\n    const response = await api.getReposData({\r\n      orgHash,\r\n      apiKey,\r\n    });\r\n    return response;\r\n  }, []);\r\n\r\n  const [repositoriesFilter, setRepositoriesFilter] = useState<FilterRepo[]>(\r\n    [],\r\n  );\r\n  const [update, setUpdate] = useState<number>(0);\r\n\r\n  // formatting All repositories for the filter (adding isSelected: true/false)\r\n  useEffect(() => {\r\n    if (reposState?.value?.length) {\r\n      const formatted = reposState?.value\r\n        .reduce((acc: FilterRepo[], item: Repo) => {\r\n          const group = item.provider_id;\r\n          const options = item.repositories.map(repository => {\r\n            return {\r\n              ...repository,\r\n              group: group,\r\n              isSelected: repository?.webhook ?? false,\r\n            };\r\n          });\r\n          return [...acc, ...options];\r\n        }, [])\r\n        .filter((repo: FilterRepo) => repo.webhook);\r\n\r\n      setRepositoriesFilter(formatted);\r\n    } else {\r\n      setRepositoriesFilter([]);\r\n    }\r\n  }, [reposState.value]);\r\n\r\n  // ============= GENERAL DORA CHARTS SETUP===================\r\n  const [timeperiodByDays, setTimeperiodByDays] = useState<\r\n    { start: number; end: number }[]\r\n  >([]);\r\n\r\n  useEffect(() => {\r\n    if (timeperiod.date_start && timeperiod.date_end) {\r\n      const timestampsByDays = [];\r\n      let dayStartTimestamp = timeperiod.date_start * 1000;\r\n      let dayEndTimestamp = +moment(dayStartTimestamp)\r\n        .add(1, 'days')\r\n        .subtract(1, 'seconds')\r\n        .format('x');\r\n\r\n      while (dayEndTimestamp < timeperiod.date_end * 1000) {\r\n        timestampsByDays.push({\r\n          start: dayStartTimestamp,\r\n          end: dayEndTimestamp,\r\n        });\r\n        dayStartTimestamp = +moment(dayStartTimestamp)\r\n          .add(1, 'days')\r\n          .format('x');\r\n        dayEndTimestamp = +moment(dayEndTimestamp).add(1, 'days').format('x');\r\n      }\r\n\r\n      timestampsByDays.push({\r\n        start: dayStartTimestamp,\r\n        end: dayEndTimestamp,\r\n      });\r\n\r\n      setTimeperiodByDays(timestampsByDays);\r\n    }\r\n  }, [timeperiod]);\r\n\r\n  // ===================DEPLOYMENT FREQUENCY SETUP=============================\r\n  const deploymentFreqState = useAsync(async (): Promise<any> => {\r\n    const response = await api.getDeploymentFreqData({\r\n      orgHash,\r\n      apiKey,\r\n      dateStart: timeperiod?.date_start,\r\n      dateEnd: timeperiod?.date_end,\r\n    });\r\n    return response;\r\n  }, [timeperiod]);\r\n\r\n  const [filteredDeploymentFreqData, setFilteredDeploymentFreqData] =\r\n    useState<any>([]);\r\n  const [formattedDeploymentFreqData, setFormattedDeploymentFreqData] =\r\n    useState<any>([]);\r\n  const [\r\n    formattedDeploymentFreqSuccessData,\r\n    setFormattedDeploymentFreqSuccessData,\r\n  ] = useState<any>([]);\r\n  const [\r\n    formattedDeploymentFreqFailedData,\r\n    setFormattedDeploymentFreqFailedData,\r\n  ] = useState<any>([]);\r\n  const [averageDeploymentFreq, setAverageDeploymentFreq] = useState<\r\n    string | null\r\n  >(null);\r\n\r\n  const chartsDeploymentFreq = [\r\n    {\r\n      title: {\r\n        label: 'Deployment frequency',\r\n        value: 'deployment-frequency',\r\n      },\r\n      averageMeasure: 'p/day',\r\n      averageValue: averageDeploymentFreq,\r\n      series: [\r\n        {\r\n          name: 'Successful deployments',\r\n          data: formattedDeploymentFreqSuccessData\r\n            ? formattedDeploymentFreqSuccessData\r\n            : [],\r\n        },\r\n        {\r\n          name: 'Failed deployments',\r\n          data: formattedDeploymentFreqFailedData\r\n            ? formattedDeploymentFreqFailedData\r\n            : [],\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  const filterDeploymentFreq = useCallback(\r\n    (data: any) => {\r\n      const filteredData = data.filter((deployment: Deployment) => {\r\n        return repositoriesFilter.find(\r\n          repo =>\r\n            repo.isSelected &&\r\n            repo.url.includes(\r\n              deployment?.repository?.replace('git@gitlab.com:', ''),\r\n            ),\r\n        );\r\n      });\r\n      return filteredData;\r\n    },\r\n    [repositoriesFilter],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (deploymentFreqState?.value?.length) {\r\n      const filteredData = filterDeploymentFreq(deploymentFreqState.value);\r\n      setFilteredDeploymentFreqData(filteredData);\r\n    } else {\r\n      setFilteredDeploymentFreqData([]);\r\n    }\r\n  }, [deploymentFreqState, filterDeploymentFreq]);\r\n\r\n  const formatDeploymentFreq = useCallback(\r\n    (status = 'success') => {\r\n      return timeperiodByDays.reduce((acc: number[][], day, i) => {\r\n        let deployments = filteredDeploymentFreqData.filter(\r\n          (deployment: Deployment) =>\r\n            deployment.timestamp * 1000 >= day.start &&\r\n            deployment.timestamp * 1000 <= day.end,\r\n        );\r\n\r\n        if (status) {\r\n          deployments = deployments.filter(\r\n            (deployment: Deployment) => deployment.status === status,\r\n          );\r\n        }\r\n\r\n        if (i === timeperiodByDays?.length - 1) {\r\n          return [\r\n            ...acc,\r\n            [day.start, deployments.length],\r\n            [day.end, deployments.length],\r\n          ];\r\n        }\r\n        return [...acc, [day.start, deployments.length]];\r\n      }, []);\r\n    },\r\n    [filteredDeploymentFreqData, timeperiodByDays],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (filteredDeploymentFreqData?.length) {\r\n      setFormattedDeploymentFreqSuccessData(formatDeploymentFreq('success'));\r\n      setFormattedDeploymentFreqFailedData(formatDeploymentFreq('failed'));\r\n      setFormattedDeploymentFreqData(formatDeploymentFreq());\r\n    } else {\r\n      setFormattedDeploymentFreqSuccessData([]);\r\n      setFormattedDeploymentFreqFailedData([]);\r\n      setFormattedDeploymentFreqData([]);\r\n    }\r\n  }, [filteredDeploymentFreqData?.length, formatDeploymentFreq]);\r\n\r\n  useEffect(() => {\r\n    if (formattedDeploymentFreqData?.length) {\r\n      const totalDeployments = formattedDeploymentFreqData.reduce(\r\n        (acc: number, item: number[], i: number) =>\r\n          formattedDeploymentFreqData.length - 1 !== i ? acc + item[1] : acc,\r\n        0,\r\n      );\r\n      const avgDeployments = (\r\n        totalDeployments / timeperiodByDays.length\r\n      ).toFixed(2);\r\n      setAverageDeploymentFreq(avgDeployments);\r\n    } else {\r\n      setAverageDeploymentFreq(null);\r\n    }\r\n  }, [formattedDeploymentFreqData, timeperiodByDays, repositoriesFilter]);\r\n\r\n  function handleRepoToggle(repo: FilterRepo) {\r\n    const updatedRepos: FilterRepo[] = repositoriesFilter.map(\r\n      (filterRepo: FilterRepo) => {\r\n        if (filterRepo.url === repo.url) {\r\n          return { ...filterRepo, isSelected: !filterRepo.isSelected };\r\n        }\r\n        return filterRepo;\r\n      },\r\n    );\r\n    setRepositoriesFilter(updatedRepos);\r\n  }\r\n\r\n  // =============== LEAD/CYCLE TIME SETUP ========================\r\n\r\n  const leadTimeState = useAsync(async (): Promise<any> => {\r\n    const response = await api.getLeadTimeData({\r\n      orgHash,\r\n      apiKey,\r\n      dateStart: timeperiod?.date_start,\r\n      dateEnd: timeperiod?.date_end,\r\n    });\r\n    return response;\r\n  }, [timeperiod]);\r\n\r\n  const [filteredLeadTimeData, setFilteredLeadTimeData] = useState<any[]>([]);\r\n  const [formattedLeadTimeData, setFormattedLeadTimeData] = useState<\r\n    number[][]\r\n  >([]);\r\n  const [ticketKeys, setTicketKeys] = useState<string[]>([]);\r\n  const [formattedLeadTimeForChangeData, setFormattedLeadTimeForChangeData] =\r\n    useState<number[][]>([]);\r\n  const [formattedCycleTimeData, setFormattedCycleTimeData] = useState<\r\n    number[][]\r\n  >([]);\r\n  const [averageCycleTimeChartData, setAverageCycleTimeChartData] = useState<\r\n    any[]\r\n  >([]);\r\n  const [averageLeadTimeChartData, setAverageLeadTimeChartData] = useState<\r\n    any[]\r\n  >([]);\r\n  const [\r\n    averageLeadTimeForChangeChartData,\r\n    setAverageLeadTimeForChangeChartData,\r\n  ] = useState<any[]>([]);\r\n  const [averageCycleTime, setAverageCycleTime] = useState<{\r\n    cycleTime: string | null;\r\n    leadTime: string | null;\r\n    leadTimeForChange: string | null;\r\n  } | null>(null);\r\n  const chartsLeadTime = [\r\n    {\r\n      title: {\r\n        value: 'cycle-time',\r\n        label: 'Cycle Time',\r\n      },\r\n      description:\r\n        'Measures the time difference between the starting time of implementing a requirement and when the changes are delivered to production.',\r\n      averageMeasure: '',\r\n      averageValue: averageCycleTime?.cycleTime,\r\n      series: [\r\n        {\r\n          name: 'Deployments Cycle Time',\r\n          type: 'scatter',\r\n          data: formattedCycleTimeData?.length ? formattedCycleTimeData : [],\r\n        },\r\n\r\n        {\r\n          name: 'Average',\r\n          type: 'line',\r\n          data: averageCycleTimeChartData?.length\r\n            ? averageCycleTimeChartData\r\n            : [],\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      title: {\r\n        value: 'lead-time',\r\n        label: 'Lead Time',\r\n      },\r\n      description:\r\n        'Measures the time difference between the time a requirement is created and when the changes are delivered to production.',\r\n      averageMeasure: '',\r\n      averageValue: averageCycleTime?.leadTime,\r\n      series: [\r\n        {\r\n          name: 'Deployments Lead Time',\r\n          type: 'scatter',\r\n          data: formattedLeadTimeData.length ? formattedLeadTimeData : [],\r\n        },\r\n\r\n        {\r\n          name: 'Average',\r\n          type: 'line',\r\n          data: averageLeadTimeChartData.length ? averageLeadTimeChartData : [],\r\n        },\r\n      ],\r\n    },\r\n    {\r\n      title: {\r\n        value: 'lead-time-for-change',\r\n        label: 'Lead Time for Changes',\r\n      },\r\n      description:\r\n        'Measures the amount of time it takes a commit to get into production.',\r\n      averageMeasure: '',\r\n      averageValue: averageCycleTime?.leadTimeForChange,\r\n      series: [\r\n        {\r\n          name: 'Deployments Lead Time For Changes',\r\n          type: 'scatter',\r\n          data: formattedLeadTimeForChangeData.length\r\n            ? formattedLeadTimeForChangeData\r\n            : [],\r\n        },\r\n\r\n        {\r\n          name: 'Average',\r\n          type: 'line',\r\n          data: averageLeadTimeForChangeChartData.length\r\n            ? averageLeadTimeForChangeChartData\r\n            : [],\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  // FILTER API RESPONCE\r\n  useEffect(() => {\r\n    if (leadTimeState?.value?.length) {\r\n      const filteredData = filterDeploymentFreq(leadTimeState.value);\r\n      setFilteredLeadTimeData(filteredData);\r\n    } else {\r\n      setFilteredLeadTimeData([]);\r\n    }\r\n  }, [leadTimeState?.value, repositoriesFilter, filterDeploymentFreq]);\r\n\r\n  // FORMAT FILTERED  API RESPONSE\r\n  const formatLeadTimeData = useCallback(\r\n    (propertyKey: string) => {\r\n      return filteredLeadTimeData.map(deployment => [\r\n        deployment.timestamp * 1000,\r\n        deployment[propertyKey] * 1000, // the value comes in seconds, convert to milliseconds\r\n      ]);\r\n    },\r\n    [filteredLeadTimeData],\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (filteredLeadTimeData?.length) {\r\n      setFormattedLeadTimeData(formatLeadTimeData('lead_time'));\r\n      setFormattedCycleTimeData(formatLeadTimeData('cycle_time'));\r\n      setFormattedLeadTimeForChangeData(\r\n        formatLeadTimeData('lead_time_for_changes'),\r\n      );\r\n      setTicketKeys(filteredLeadTimeData.map(item => item.key));\r\n    } else {\r\n      setFormattedLeadTimeData([]);\r\n      setFormattedCycleTimeData([]);\r\n      setFormattedLeadTimeForChangeData([]);\r\n      setTicketKeys([]);\r\n    }\r\n  }, [filteredLeadTimeData, formatLeadTimeData, update]);\r\n\r\n  // SET AVERAGE\r\n  const generateAverageChart = useCallback(\r\n    (formattedData: any) => {\r\n      return timeperiodByDays.reduce((acc: number[][], day, i) => {\r\n        const dayDeployments = formattedData.filter(\r\n          (deployment: number[]) =>\r\n            deployment[0] >= day.start && deployment[0] <= day.end,\r\n        );\r\n\r\n        const dayAverage = dayDeployments?.length\r\n          ? dayDeployments.reduce(\r\n              (accum: number, event: number[]) => accum + event[1],\r\n              0,\r\n            ) / dayDeployments?.length\r\n          : null;\r\n\r\n        if (!dayAverage) {\r\n          if (i === timeperiodByDays?.length - 1 && acc?.length) {\r\n            return [...acc, [day.end, acc[acc.length - 1][1]]];\r\n          }\r\n          return acc;\r\n        }\r\n        if (!acc?.length) {\r\n          return [\r\n            ...acc,\r\n            [timeperiodByDays[0].start, dayAverage],\r\n            [day.end, dayAverage],\r\n          ];\r\n        }\r\n        return [...acc, [day.end, dayAverage]];\r\n      }, []);\r\n    },\r\n    [timeperiodByDays],\r\n  );\r\n\r\n  const formatChartAxisTime = useCallback((value: number) => {\r\n    const valueDuration: ValueDuration = moment.duration(value);\r\n    let formattedValue = '0';\r\n\r\n    if (value !== 0) {\r\n      if (valueDuration._data.months) {\r\n        formattedValue = `${Math.floor(valueDuration.asDays())}d`;\r\n      } else if (valueDuration._data.days) {\r\n        formattedValue = `${valueDuration._data.days}d ${\r\n          valueDuration._data.minutes >= 30\r\n            ? valueDuration._data.hours + 1\r\n            : valueDuration._data.hours\r\n        }h`;\r\n      } else if (valueDuration._data.hours) {\r\n        formattedValue = `${valueDuration._data.hours}h ${\r\n          valueDuration._data.seconds >= 30\r\n            ? valueDuration._data.minutes + 1\r\n            : valueDuration._data.minutes\r\n        }m`;\r\n      } else if (valueDuration._data.minutes) {\r\n        formattedValue = `${valueDuration._data.minutes}m ${\r\n          valueDuration._data.milliseconds >= 30\r\n            ? valueDuration._data.seconds + 1\r\n            : valueDuration._data.seconds\r\n        }s`;\r\n      } else if (valueDuration._data.seconds) {\r\n        formattedValue = `${\r\n          valueDuration._data.milliseconds >= 30\r\n            ? valueDuration._data.seconds + 1\r\n            : valueDuration._data.seconds\r\n        }s`;\r\n      }\r\n    }\r\n\r\n    return formattedValue;\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // calculate average number per timepareiod\r\n    let avgCycleTime: string | null = null;\r\n    let avgLeadTime: string | null = null;\r\n    let avgLeadTimeForChange: string | null = null;\r\n\r\n    const totalCycleTime = formattedCycleTimeData?.length\r\n      ? formattedCycleTimeData.reduce((acc, item) => acc + item[1], 0)\r\n      : null;\r\n    const totalLeadTime = formattedLeadTimeData?.length\r\n      ? formattedLeadTimeData.reduce((acc, item) => acc + item[1], 0)\r\n      : null;\r\n\r\n    const totalLeadTimeForChange = formattedLeadTimeForChangeData?.length\r\n      ? formattedLeadTimeForChangeData.reduce((acc, item) => acc + item[1], 0)\r\n      : null;\r\n\r\n    if (totalCycleTime) {\r\n      avgCycleTime = formatChartAxisTime(\r\n        totalCycleTime / formattedCycleTimeData.length,\r\n      );\r\n    }\r\n    if (totalLeadTime) {\r\n      avgLeadTime = formatChartAxisTime(\r\n        totalLeadTime / formattedLeadTimeData.length,\r\n      );\r\n    }\r\n    if (totalLeadTimeForChange) {\r\n      avgLeadTimeForChange = formatChartAxisTime(\r\n        totalLeadTimeForChange / formattedLeadTimeForChangeData.length,\r\n      );\r\n    }\r\n\r\n    setAverageCycleTime({\r\n      cycleTime: avgCycleTime,\r\n      leadTime: avgLeadTime,\r\n      leadTimeForChange: avgLeadTimeForChange,\r\n    });\r\n\r\n    // calculate average chart data (avarage for every day in the timeperiod)\r\n    setAverageCycleTimeChartData(generateAverageChart(formattedCycleTimeData));\r\n    setAverageLeadTimeChartData(generateAverageChart(formattedLeadTimeData));\r\n    setAverageLeadTimeForChangeChartData(\r\n      generateAverageChart(formattedLeadTimeForChangeData),\r\n    );\r\n  }, [\r\n    formattedLeadTimeData,\r\n    formattedCycleTimeData,\r\n    formattedLeadTimeForChangeData,\r\n    generateAverageChart,\r\n    formatChartAxisTime,\r\n  ]);\r\n\r\n  interface ValueDuration extends moment.Duration {\r\n    _data?: any;\r\n  }\r\n\r\n  if (reposState?.loading) {\r\n    return <Progress />;\r\n  } else if (reposState?.error) {\r\n    return <Alert severity=\"error\">{reposState?.error.message}</Alert>;\r\n  }\r\n\r\n  return (\r\n    <InfoCard title=\"DORA Metrics\">\r\n      <Grid container spacing={3} alignItems=\"stretch\">\r\n        <Grid item xs={4} lg={2}>\r\n          <InfoCard title=\"Repositories\">\r\n            {repositoriesFilter\r\n              .filter((repo: FilterRepo) => repo.isSelected)\r\n              .map((repo: FilterRepo) => (\r\n                <Chip\r\n                  label={repo.name}\r\n                  key={repo.url}\r\n                  size=\"small\"\r\n                  onDelete={() => handleRepoToggle(repo)}\r\n                />\r\n              ))}\r\n            {repositoriesFilter\r\n              .filter((repo: FilterRepo) => !repo.isSelected)\r\n              .map((repo: FilterRepo) => (\r\n                <Chip\r\n                  label={repo.name}\r\n                  key={repo.url}\r\n                  size=\"small\"\r\n                  variant=\"outlined\"\r\n                  onClick={() => handleRepoToggle(repo)}\r\n                />\r\n              ))}\r\n          </InfoCard>\r\n        </Grid>\r\n        <Grid item xs={8} lg={10}>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} lg={6}>\r\n              <AaDoraChart\r\n                timeperiod={timeperiod}\r\n                charts={chartsDeploymentFreq}\r\n                chartColor={['#3090B3', '#FFA1B5']}\r\n                chartHeight={360}\r\n                loading={deploymentFreqState.loading}\r\n                customPointFormatter={null}\r\n                customOptions={null}\r\n                yAxisFormatter={null}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} lg={6}>\r\n              <AaDoraChart\r\n                timeperiod={timeperiod}\r\n                charts={chartsLeadTime}\r\n                chartColor={['#FF6384', '#333333']}\r\n                yAxisFormatter={function (this: any) {\r\n                  const formattedValue: string = formatChartAxisTime(\r\n                    this.value,\r\n                  );\r\n                  return `<span>${formattedValue}</span>`;\r\n                }}\r\n                chartHeight={360}\r\n                customPointFormatter={function (this: any) {\r\n                  const formattedValue = formatChartAxisTime(this.options.y);\r\n\r\n                  const keyIndex = formattedCycleTimeData.findIndex(\r\n                    item => item[0] === this.options.x,\r\n                  );\r\n\r\n                  return `<span>${this.series.userOptions.name.replace(\r\n                    'Deployments ',\r\n                    '',\r\n                  )}: ${formattedValue}</span><br/><span>${\r\n                    this.series.initialType === 'scatter'\r\n                      ? `Ticket key: ${ticketKeys[keyIndex]}`\r\n                      : ''\r\n                  }`;\r\n                }}\r\n                loading={leadTimeState.loading}\r\n                customOptions={null}\r\n                setUpdate={setUpdate}\r\n                update={update}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </Grid>\r\n      </Grid>\r\n    </InfoCard>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}