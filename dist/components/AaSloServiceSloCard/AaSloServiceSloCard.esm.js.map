{"version":3,"file":"AaSloServiceSloCard.esm.js","sources":["../../../src/components/AaSloServiceSloCard/AaSloServiceSloCard.tsx"],"sourcesContent":["/* eslint-disable no-console */\r\nimport { Progress } from '@backstage/core-components';\r\nimport {\r\n  ErrorBudgetChartDataResponse,\r\n  Service,\r\n  ServiceFeature,\r\n  SloHistoryDataResponse,\r\n  Timeperiod,\r\n} from '../../api/types';\r\nimport { Box, Card, Divider, Grid, Typography } from '@material-ui/core';\r\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\r\nimport { agileAnalyticsApiRef } from '../../api';\r\nimport useAsync from 'react-use/lib/useAsync';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport CheckCircleOutlineOutlinedIcon from '@material-ui/icons/CheckCircleOutlineRounded';\r\nimport HighlightOff from '@material-ui/icons/HighlightOff';\r\nimport moment from 'moment';\r\n\r\nexport const AaSloServiceSloCard = ({\r\n  timeperiod,\r\n  service,\r\n  feature,\r\n}: {\r\n  timeperiod: Timeperiod;\r\n  service: Service;\r\n  feature: ServiceFeature;\r\n}) => {\r\n  const api = useApi(agileAnalyticsApiRef);\r\n  const config = useApi(configApiRef);\r\n  const orgHash = config.getString('agileAnalytics.orgHash');\r\n  const apiKey = config.getString('agileAnalytics.apiKey');\r\n\r\n\r\n  const { date_start, date_end } = timeperiod;\r\n\r\n  const chartDataState =\r\n    useAsync(async (): Promise<ErrorBudgetChartDataResponse> => {\r\n      const response = await api.getErrorBudgetChartData({\r\n        orgHash,\r\n        apiKey,\r\n        serviceName: service.service,\r\n        feature: feature.feature_name,\r\n        date_start,\r\n        date_end,\r\n        step_size: '24 hours',\r\n      });\r\n      return response;\r\n    }, [feature, timeperiod]);\r\n\r\n  const sloHistoryState =\r\n    useAsync(async (): Promise<SloHistoryDataResponse> => {\r\n      let response: { data?: any; status: number; error: string } = {\r\n        data: null,\r\n        status: 204,\r\n        error: '',\r\n      };\r\n\r\n      if (chartDataState?.value) {\r\n        const dates: [number, number][] = [];\r\n        while (dates?.length < 4) {\r\n          let week = null;\r\n          let year = null;\r\n          if (!dates?.length) {\r\n            // calculate endTimestamp and startTimestamp for the current week (endTimestamp mught be in the future)\r\n            week = moment().isoWeek();\r\n            year = moment().year();\r\n          } else {\r\n            const endMomentObj = moment(\r\n              (dates[dates?.length - 1][0] - 1) * 1000,\r\n            );\r\n            week = endMomentObj.isoWeek();\r\n            year = endMomentObj.year();\r\n          }\r\n\r\n          // Get the start of the week (Monday)\r\n          const weekStart = moment()\r\n            .year(year)\r\n            .week(week)\r\n            .startOf('week')\r\n            .unix();\r\n\r\n          // Get the end of the week (Sunday)\r\n          const weekEnd = moment().year(year).week(week).endOf('week').unix();\r\n\r\n          dates.push([weekStart, weekEnd]);\r\n        }\r\n\r\n        try {\r\n          const values = await Promise.allSettled(\r\n            dates.map(date =>\r\n              api.getErrorBudgetChartData({\r\n                orgHash,\r\n                apiKey,\r\n                serviceName: service.service,\r\n                feature: feature.feature_name,\r\n                date_start: date[0],\r\n                date_end: date[1],\r\n                step_size: '24 hours',\r\n              }),\r\n            ),\r\n          );\r\n\r\n          if (values.length) {\r\n            if (!values.find(value => value.status === 'fulfilled')) {\r\n              response = {\r\n                ...response,\r\n                status: 404,\r\n                error: 'error',\r\n              };\r\n            } else {\r\n              let status = 200;\r\n\r\n              if (\r\n                !values.find(\r\n                  value =>\r\n                    value.status === 'fulfilled' && value.value.status !== 204,\r\n                )\r\n              ) {\r\n                status = 204;\r\n              }\r\n\r\n              const filteredValues = values\r\n                .filter(value => value.status === 'fulfilled')\r\n                .map(value => (value.value.data ? value.value.data : undefined))\r\n                .filter(value => value !== undefined);\r\n\r\n              const calculatedSloData = filteredValues.map(item => {\r\n                return calculateAverageSloValue(\r\n                  item,\r\n                  chartDataState?.value?.slo_target,\r\n                );\r\n              });\r\n\r\n              response = {\r\n                ...response,\r\n                data: {\r\n                  slo: calculatedSloData,\r\n                  dates,\r\n                },\r\n                status: status,\r\n              };\r\n            }\r\n          }\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n      return response;\r\n    }, [chartDataState?.value]);\r\n\r\n  const filteredData = filterData(chartDataState?.value?.data);\r\n\r\n  function filterData(dataArray: [number, number][] | undefined) {\r\n    if (!dataArray?.length) {\r\n      return null;\r\n    }\r\n    // return only error budget value\r\n    return dataArray?.map(item => item[1]);\r\n  }\r\n\r\n  function calculateSloValue(\r\n    filtered: number[] | null,\r\n    target: number | undefined,\r\n  ) {\r\n    // calculating SLO from error budget value: value as SLO target +/- remaining error budget\r\n    if (!filtered?.length || !target) {\r\n      return 0;\r\n    }\r\n\r\n    const latestMeasurement: number = filtered[filtered.length - 1];\r\n    const totalErrorBudget = 1 - target;\r\n    const avaivableErrorBudget = (totalErrorBudget * latestMeasurement) / 100;\r\n\r\n    const slo = (target + avaivableErrorBudget) * 100;\r\n    return slo.toFixed(3);\r\n  }\r\n\r\n  // simplified SLO average calc\r\n  function calculateAverageSloValue(\r\n    dataPoints: [number, number][],\r\n    target?: number,\r\n  ) {\r\n    const slosForEachPoint = dataPoints.map(dataPoint => {\r\n      const slo = calculateSloValue([dataPoint[1]], target);\r\n      return +slo;\r\n    });\r\n\r\n    const averageSlo =\r\n      slosForEachPoint?.reduce((acc: number, item) => +acc + +item, 0) /\r\n      slosForEachPoint?.length;\r\n\r\n    return averageSlo.toFixed(3);\r\n  }\r\n\r\n  if (chartDataState?.loading) {\r\n    return <Progress />;\r\n  } else if (chartDataState?.error) {\r\n    return <Alert severity=\"error\">{chartDataState?.error.message}</Alert>;\r\n  } else if (!chartDataState?.value) {\r\n    return <Typography component=\"p\">No data</Typography>;\r\n  }\r\n\r\n\r\n  return (\r\n    <Card>\r\n      <Box sx={{ marginY: '16px', textAlign: 'center' }}>\r\n        <Typography variant=\"h5\">{chartDataState.value.slo_name}</Typography>\r\n        <Typography variant=\"subtitle1\">in the last 24 hours</Typography>\r\n      </Box>\r\n      <Divider aria-hidden=\"true\" />\r\n      <Box\r\n        sx={{\r\n          paddingTop: '12px',\r\n          paddingX: '12px',\r\n        }}\r\n      >\r\n        <Typography component=\"p\" variant=\"h6\" align=\"center\">\r\n          {calculateSloValue(filteredData, chartDataState.value.slo_target)\r\n            ? `${calculateSloValue(\r\n                filteredData,\r\n                chartDataState?.value?.slo_target,\r\n              )}%`\r\n            : 'no SLO DATA'}\r\n        </Typography>\r\n      </Box>\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          gridGap: '4px',\r\n          padding: '12px',\r\n        }}\r\n      >\r\n        {+calculateSloValue(filteredData, chartDataState.value.slo_target) >\r\n        chartDataState.value.slo_target * 100 ? (\r\n          <CheckCircleOutlineOutlinedIcon\r\n            style={{ color: '#8ec358', fontSize: 24 }}\r\n          />\r\n        ) : (\r\n          <HighlightOff style={{ color: '#c03a3a', fontSize: 24 }} />\r\n        )}\r\n        <Typography component=\"p\" variant=\"subtitle1\" align=\"center\">\r\n          Target: {chartDataState.value.slo_target * 100}%\r\n        </Typography>\r\n      </Box>\r\n      <Divider aria-hidden=\"true\" />\r\n      <Box sx={{ padding: '12px' }}>\r\n        <Typography component=\"p\" variant=\"body1\">\r\n          Last 4-week history:\r\n        </Typography>\r\n\r\n        {sloHistoryState?.loading ? <Progress /> : null}\r\n        {!sloHistoryState?.loading && sloHistoryState?.error ? (\r\n          <Alert severity=\"error\">Faled to load SLO's history</Alert>\r\n        ) : null}\r\n        {!sloHistoryState?.loading &&\r\n        !sloHistoryState?.error &&\r\n        !sloHistoryState?.value?.data?.slo?.length ? (\r\n          <Typography component=\"p\" variant=\"body1\">\r\n            No data\r\n          </Typography>\r\n        ) : null}\r\n        {!sloHistoryState?.loading &&\r\n        !sloHistoryState?.error &&\r\n        sloHistoryState?.value?.data?.slo?.length ? (\r\n          <Grid container spacing={2}>\r\n            {sloHistoryState?.value?.data?.slo?.map(slo => (\r\n              <Grid item xs={3}>\r\n                <Box\r\n                  sx={{\r\n                    padding: '2px',\r\n                    bgcolor: `${\r\n                      +slo >= chartDataState.value.slo_target * 100\r\n                        ? '#8ec358'\r\n                        : '#c03a3a'\r\n                    }`,\r\n                    display: 'flex',\r\n                    justifyContent: 'center',\r\n                    alignItems: 'center',\r\n                    color: '#fff',\r\n                  }}\r\n                >\r\n                  {slo}\r\n                </Box>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        ) : null}\r\n      </Box>\r\n    </Card>\r\n  );\r\n};\r\n"],"names":[],"mappings":"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"}