{"version":3,"file":"AaSloServiceItem.esm.js","sources":["../../../src/components/AaSloServiceItem/AaSloServiceItem.tsx"],"sourcesContent":["/* eslint-disable no-console */\r\nimport { InfoCard, Progress } from '@backstage/core-components';\r\nimport {\r\n  Service,\r\n  SingleServiceDataResponse,\r\n  Timeperiod,\r\n} from '../../api/types';\r\nimport { Grid, Typography } from '@material-ui/core';\r\nimport { configApiRef, useApi } from '@backstage/core-plugin-api';\r\nimport { agileAnalyticsApiRef } from '../../api';\r\nimport useAsync from 'react-use/lib/useAsync';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { AaSloServiceSloCard } from '../AaSloServiceSloCard';\r\n\r\nexport const AaSloServiceItem = ({\r\n  timeperiod,\r\n  service,\r\n}: {\r\n  timeperiod: Timeperiod;\r\n  service: Service;\r\n}) => {\r\n  const api = useApi(agileAnalyticsApiRef);\r\n  const config = useApi(configApiRef);\r\n  const orgHash = config.getString('agileAnalytics.orgHash');\r\n  const apiKey = config.getString('agileAnalytics.apiKey');\r\n\r\n  const singleServicesState =\r\n    useAsync(async (): Promise<SingleServiceDataResponse> => {\r\n      const response = await api.getSingleServiceData({\r\n        orgHash,\r\n        apiKey,\r\n        serviceName: service.service,\r\n      });\r\n      return response;\r\n    }, [service]);\r\n\r\n  if (singleServicesState?.loading) {\r\n    return <Progress />;\r\n  } else if (singleServicesState?.error) {\r\n    return <Alert severity=\"error\">{singleServicesState?.error.message}</Alert>;\r\n  } else if (!singleServicesState?.value) {\r\n    return <Typography component=\"p\">No data</Typography>;\r\n  }\r\n  return (\r\n    <InfoCard\r\n      title={`Service: ${service?.service}`}\r\n      subheader={`Operational dashboard URL: ${service?.url}`}\r\n    >\r\n      {!singleServicesState?.value?.features?.length ? (\r\n        <Typography component=\"p\">No SLOs</Typography>\r\n      ) : (\r\n        <Grid container spacing={3} alignItems=\"stretch\">\r\n          {singleServicesState.value.features.map(feature => (\r\n            <Grid item xs={3}>\r\n              <AaSloServiceSloCard\r\n                timeperiod={timeperiod}\r\n                service={service}\r\n                feature={feature}\r\n              />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n      )}\r\n    </InfoCard>\r\n  );\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;AAcO,MAAM,mBAAmB,CAAC;AAAA,EAC/B,UAAA;AAAA,EACA;AACF,CAAA,KAGM;AACJ,EAAA,MAAM,GAAA,GAAM,OAAO,oBAAoB,CAAA;AACvC,EAAA,MAAM,MAAA,GAAS,OAAO,YAAY,CAAA;AAClC,EAAA,MAAM,OAAA,GAAU,MAAA,CAAO,SAAA,CAAU,wBAAwB,CAAA;AACzD,EAAA,MAAM,MAAA,GAAS,MAAA,CAAO,SAAA,CAAU,uBAAuB,CAAA;AAEvD,EAAA,MAAM,mBAAA,GACJ,SAAS,YAAgD;AACvD,IAAA,MAAM,QAAA,GAAW,MAAM,GAAA,CAAI,oBAAA,CAAqB;AAAA,MAC9C,OAAA;AAAA,MACA,MAAA;AAAA,MACA,aAAa,OAAA,CAAQ;AAAA,KACtB,CAAA;AACD,IAAA,OAAO,QAAA;AAAA,EACT,CAAA,EAAG,CAAC,OAAO,CAAC,CAAA;AAEd,EAAA,IAAI,qBAAqB,OAAA,EAAS;AAChC,IAAA,2BAAQ,QAAA,EAAA,EAAS,CAAA;AAAA,EACnB,CAAA,MAAA,IAAW,qBAAqB,KAAA,EAAO;AACrC,IAAA,2BAAQ,KAAA,EAAA,EAAM,QAAA,EAAS,OAAA,EAAS,QAAA,EAAA,mBAAA,EAAqB,MAAM,OAAA,EAAQ,CAAA;AAAA,EACrE,CAAA,MAAA,IAAW,CAAC,mBAAA,EAAqB,KAAA,EAAO;AACtC,IAAA,uBAAO,GAAA,CAAC,UAAA,EAAA,EAAW,SAAA,EAAU,GAAA,EAAI,QAAA,EAAA,SAAA,EAAO,CAAA;AAAA,EAC1C;AACA,EAAA,uBACE,GAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,KAAA,EAAO,CAAA,SAAA,EAAY,OAAA,EAAS,OAAO,CAAA,CAAA;AAAA,MACnC,SAAA,EAAW,CAAA,2BAAA,EAA8B,OAAA,EAAS,GAAG,CAAA,CAAA;AAAA,MAEpD,QAAA,EAAA,CAAC,mBAAA,EAAqB,KAAA,EAAO,QAAA,EAAU,MAAA,mBACtC,GAAA,CAAC,UAAA,EAAA,EAAW,SAAA,EAAU,GAAA,EAAI,QAAA,EAAA,SAAA,EAAO,CAAA,mBAEjC,GAAA,CAAC,IAAA,EAAA,EAAK,SAAA,EAAS,IAAA,EAAC,OAAA,EAAS,CAAA,EAAG,UAAA,EAAW,SAAA,EACpC,QAAA,EAAA,mBAAA,CAAoB,KAAA,CAAM,QAAA,CAAS,GAAA,CAAI,CAAA,OAAA,qBACtC,GAAA,CAAC,IAAA,EAAA,EAAK,IAAA,EAAI,IAAA,EAAC,IAAI,CAAA,EACb,QAAA,kBAAA,GAAA;AAAA,QAAC,mBAAA;AAAA,QAAA;AAAA,UACC,UAAA;AAAA,UACA,OAAA;AAAA,UACA;AAAA;AAAA,OACF,EACF,CACD,CAAA,EACH;AAAA;AAAA,GAEJ;AAEJ;;;;"}